<!-- Formulário de view de Processo Administrativo-->

{% extends 'index.html' %}

{% load static %}

{% load widget_tweaks %} 

{% block titulo %}
    <title>Visualizar Processo</title>
{% endblock %}

{% block conteudo %} 
    <div class="container p-4">
        <div class="card">
            <div class="card-header text-white" style="background-color: #5c5c5c;">
                <h5 style="text-align: center;">Visualizar Processo</h5>
            </div>
            <div class="card-body">
                    <!-- {% csrf_token %} -->
                {% for atributo in dados_processo %}
                    <h5>Processo: {{ atributo.numero }}</h5>
                    <hr>
                    <div class="row"> 
                        {% if atributo.numero %}
                            <div class="col">
                                <label for="numero">Pat N° <b>*</b></label>
                                <input type="text" class="form-control" value="{{ atributo.numero}}" readonly>
                            </div>
                        {% endif %}
                        {% if atributo.uf %}
                            <div class="col">
                                <label for="uf">UF <b>*</b></label>
                                <input type="text" class="form-control" value="{{ atributo.uf }}" readonly>
                            </div>
                        {% endif %}
                        {% if atributo.municipio %}
                            <div class="col">
                                <label for="municipio">Município <b>*</b></label>
                                <input type="text" class="form-control" value="{{ atributo.municipio }}" readonly>
                            </div>
                        {% endif %}
                        {% if atributo.data_inicial %}
                            <div class="col">
                                <label for="data_inicial">Período</label>
                                <input type="text" class="form-control" value="{{ atributo.data_inicial|date:"d/m/Y" }}" readonly>
                            </div>
                        {% endif %}
                        {% if atributo.data_final %}
                            <div class="col">
                                <label for="data_final"><!--Período Final--></label>
                                <input type="text" class="form-control" value="{{ atributo.data_final|date:"d/m/Y" }}" readonly>
                            </div>
                        {% endif %}
                        {% if atributo.data_div_ativa %}
                            <div class="col">
                                <label for="data_div_ativa">D.A</label>
                                <input type="text" class="form-control" value="{{ atributo.data_div_ativa }}" readonly>
                            </div>
                        {% endif %}
                    </div>
                    <br>
                    <div class="row">

                            <div class="col">
                                <label for="valor_atributo">Valor do Tributo</label>
                                <input type="text" class="form-control" value="{{ atributo.valor_atributo }}" readonly>
                            </div>
                            <div class="col">
                                <label for="valor_multa">Valor da Multa</label>
                                <input type="text" class="form-control" value="{{ atributo.valor_multa }}" readonly>
                            </div>
                            <div class="col">
                                <label for="valor_credito">Valor do Crédito</label>
                                <input type="text" class="form-control" value="{{ atributo.valor_credito }}" readonly>
                            </div>
                            <div class="col">
                                <label for="valor_atualizado">Valor do Atualizado</label>
                                <input type="text" class="form-control" value="{{ atributo.valor_atualizado }}" readonly>
                            </div>  
                            <div class="col">
                                <label for="data_valor_atualizado">Data Valor Atualizado</label>
                                <input type="text" class="form-control" value="{{ atributo.data_valor_atualizado }}" readonly>
                            </div> 
                    </div>    
                    <br><br>
                    <h5>Contribuinte</h5>
                    <hr>
                    <div class="row">
                        <div class="col">
                            <label for="nome_contribuinte">Nome / Razão Social <b>*</b></label>
                            <input type="text" class="form-control" value="{{ atributo.nome_contribuinte }}" readonly>
                        </div> 
                        <div class="col">
                            <label for="tipo_pessoa">Tipo de Pessoa <b>*</b></label>
                            <input type="text" class="form-control" value="{{ atributo.tipo_pessoa }}" readonly>
                        </div> 
                        <div class="col">
                            <label for="documento">CPF / CNPJ <b>*</b></label>
                            <input type="text" class="form-control" value="{{ atributo.documento }}" readonly>
                        </div> 
                        <div class="col">
                            <label for="nome_fantasia">Nome Fantasia</label>
                            <input type="text" class="form-control" value="{{ atributo.nome_fantasia }}" readonly>
                        </div> 
                    </div>
                    <br>
                    <div class="row">
                        <div class="col">
                            <label for="endereco">Logradouro / N° / Bairro <b>*</b></label>
                            <input type="text" class="form-control" value="{{ atributo.endereco }}" readonly>
                        </div> 
                        <div class="col">
                            <label for="complemento">Complemento</label>
                            <input type="text" class="form-control" value="{{ atributo.complemento }}" readonly>
                        </div> 
                    </div>
                    <br>
                    <div class="row">
                        <div class="col">
                            <label for="uf_contribuinte">UF</label>
                            <input type="text" class="form-control" value="{{ atributo.uf_contribuinte }}" readonly>
                        </div> 
                        <div class="col">
                            <label for="municipio_contribuinte">Município</label>
                            <input type="text" class="form-control" value="{{ atributo.municipio_contribuinte }}" readonly>
                        </div> 
                        <div class="col">
                            <label for="cep">CEP</label>
                            <input type="text" class="form-control" value="{{ atributo.cep }}" readonly>
                        </div> 
                        <div class="col">
                            <label for="email">E-mail</label>
                            <input type="text" class="form-control" value="{{ atributo.email }}" readonly>
                        </div> 
                        <div class="col">
                            <label for="celular">Celular</label>
                            <input type="text" class="form-control" value="{{ atributo.celular }}" readonly>
                        </div> 
                        <div class="col">
                            <label for="telefone">Telefone</label>
                            <input type="text" class="form-control" value="{{ atributo.telefone }}" readonly>
                        </div> 
                    </div>
                    <br>         
                    <a href="{% url 'proc-adm-list' %}" class="btn btn-secondary btn-sm">Voltar</a>           
                {% endfor %}
            </div>
        </div>
    </div>
    <br><br>
{% endblock %}

{% block scripts %}
    <!-- Importação do arquivo dentro da pasta static/js para usar máscaras nos campos input -->
    <script src="{% static 'js/jquery.mask.min.js' %}"></script>

    <!-- Configuração de máscaras nos campos inputs, buscando o campo através do ID -->
    <script>
        $(document).ready(function(){
            $("#numero").mask("00000/0000", {reverse: true});
            $("#cep").mask('00000-000');
            $("#telefone").mask('(00) 0000-0000');
            $("#celular").mask('(00) 00000-0000');
            $('#valor_atributo').mask("000,000,000.00", {reverse: true});
            $('#valor_multa').mask("000,000,000.00", {reverse: true});
            $('#valor_credito').mask("000,000,000.00", {reverse: true});
            $('#valor_atualizado').mask("000,000,000.00", {reverse: true});

            // Função para aplicar máscara de CPF ou CNPJ de acordo com a seleção do campo select de 'Tipo pessoa'
            function aplicarMascara(){
                var opcaoSelecionada = $('#tipo_pessoa').val();
                var campoDoc = $('#documento');

                if(opcaoSelecionada === 'Física'){
                    campoDoc.mask('000.000.000-00', {reverse: true});
                } else {
                    campoDoc.mask('00.000.000/0000-00', {reverse: true});
                }

            }

            aplicarMascara();
            $('#tipo_pessoa').change(aplicarMascara);
        })
    </script>
{% endblock %}

